<html>
    <script src="/howler.js"></script>
    <script>
        var sound = new Howl({
          src: ['bell.mp3']
        });
    </script>

    <body>

    <script>
        var bell = new Howl({
             src: ['bell.mp3'],
             volume: 0.4,
        });

        var routine = {
          loop: true,
          intervals: [20 * 1000, 5 * 1000]
        };

        function ringBell() {
               console.log(new Date().toLocaleTimeString());
               bell.play();
        }

        function getRoutineLength(r) {
            return r.intervals.reduce((a, b) => a + b, 0);
        }

        function getRoutinePlayer(r) {
          return function() {
            var total = 0;
            r.intervals.forEach((interval, i) => {
                setTimeout(ringBell, total + interval);
                total += interval;
            });
          };
        }

        setInterval(getRoutinePlayer(routine), getRoutineLength(routine));

    </script>

    </body>

</html>
